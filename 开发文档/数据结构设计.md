# 数据结构设计

### 1. 门店管理 (stores)

| 字段名       | 类型         | 说明                     |
|--------------|--------------|--------------------------|
| id           | BIGINT(PK)   | 主键                     |
| name         | VARCHAR(255) | 门店名称                 |
| address      | TEXT         | 详细地址                 |
| area         | FLOAT        | 工作场所面积（平方米）   |
| created_at   | TIMESTAMP    | 创建时间                 |
| updated_at   | TIMESTAMP    | 更新时间                 |

---

### 2. 员工管理 (employees)

| 字段名       | 类型         | 说明                     |
|--------------|--------------|--------------------------|
| id           | BIGINT(PK)   | 主键                     |
| name         | VARCHAR(255) | 员工姓名                 |
| position     | ENUM         | 职位（门店经理/副经理/小组长/店员） |
| phone        | VARCHAR(20)  | 联系电话                 |
| email        | VARCHAR(255) | 电子邮箱                 |
| store_id     | BIGINT(FK)   | 所属门店ID               |
| created_at   | TIMESTAMP    | 创建时间                 |
| updated_at   | TIMESTAMP    | 更新时间                 |

---

### 3. 员工偏好 (employee_preferences)

| 字段名               | 类型       | 说明                          |
|----------------------|------------|-------------------------------|
| employee_id          | BIGINT(PK) | 员工ID（与employees.id关联）  |
| workdays_start       | TINYINT    | 工作日起始（1=周一,7=周日）   |
| workdays_end         | TINYINT    | 工作日结束                    |
| shift_time_start     | TIME       | 偏好工作时间段开始（如08:00）|
| shift_time_end       | TIME       | 偏好工作时间段结束            |
| max_hours_per_day    | FLOAT      | 每日最大工作时长（默认NULL）  |
| max_hours_per_week   | FLOAT      | 每周最大工作时长（默认NULL）  |

---

### 4. 技能表 (skills)

| 字段名       | 类型         | 说明               |
|--------------|--------------|--------------------|
| id           | BIGINT(PK)   | 主键               |
| name         | VARCHAR(50)  | 技能名称（收银/导购/库房） |

---

### 5. 员工技能关联 (employee_skills)

| 字段名       | 类型       | 说明                |
|--------------|------------|---------------------|
| employee_id  | BIGINT(PK) | 员工ID              |
| skill_id     | BIGINT(PK) | 技能ID              |

---

### 6. 排班规则 (shift_rules)

| 字段名            | 类型         | 说明                          |
|-------------------|--------------|-------------------------------|
| id                | BIGINT(PK)   | 主键                          |
| store_id          | BIGINT(FK)   | 适用门店ID                    |
| name              | VARCHAR(255) | 规则名称（如"周末高峰排班规则"）|
| shift_type        | VARCHAR(50)  | 班次类型（早班/中班/晚班）    |
| min_employees     | INT          | 该班次所需最少人数            |
| effective_start   | DATE         | 规则生效开始日期              |
| effective_end     | DATE         | 规则生效结束日期              |

---

### 7. 销售预测 (sales_forecasts)

| 字段名           | 类型       | 说明                      |
|------------------|------------|---------------------------|
| id               | BIGINT(PK) | 主键                      |
| store_id         | BIGINT(FK) | 门店ID                    |
| forecast_date    | DATE       | 预测日期                  |
| predicted_sales  | DECIMAL    | 预测营业额                |
| confidence_level | FLOAT      | 预测置信度（0.0-1.0）     |

---

### 8. 班次表 (shifts)

| 字段名            | 类型         | 说明                          |
|-------------------|--------------|-------------------------------|
| id                | BIGINT(PK)   | 主键                          |
| store_id          | BIGINT(FK)   | 所属门店ID                    |
| start_time        | DATETIME     | 班次开始时间                  |
| end_time          | DATETIME     | 班次结束时间                  |
| required_position | ENUM         | 需求职位类型                  |
| required_skill_id | BIGINT(FK)   | 需求技能ID                    |
| status            | ENUM         | 状态（assigned/open）         |
| forecast_id       | BIGINT(FK)   | 关联的销售预测ID              |

---

### 9. 班次分配表 (shift_assignments)

| 字段名           | 类型         | 说明                          |
|------------------|--------------|-------------------------------|
| id               | BIGINT(PK)   | 主键                          |
| shift_id         | BIGINT(FK)   | 班次ID                        |
| employee_id      | BIGINT(FK)   | 分配员工ID（NULL表示未分配）  |
| assigned_by      | BIGINT(FK)   | 操作者ID（门店管理员）        |
| assigned_at      | TIMESTAMP    | 分配时间                      |
| override_reason  | TEXT         | 手动分配原因（可选）          |
